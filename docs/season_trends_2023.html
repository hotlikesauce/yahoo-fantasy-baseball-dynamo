<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Summertime Sadness - 2023 Season Trends</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0f172a; color: #e2e8f0; font-family: 'Segoe UI', system-ui, sans-serif; padding: 24px; }
  .container { max-width: 1400px; margin: 0 auto; }
  h1 { text-align: center; font-size: 2em; margin-bottom: 4px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  h2 { text-align: center; color: #64748b; font-size: 1.1em; margin-bottom: 24px; }
  h3 { color: #38bdf8; margin: 32px 0 12px; font-size: 1.3em; border-bottom: 1px solid #1e293b; padding-bottom: 8px; }
  .section-desc { color: #94a3b8; font-size: 0.9em; margin-bottom: 16px; }
  .chart-box { background: #1e293b; border-radius: 12px; padding: 24px; margin-bottom: 24px; position: relative; height: 550px; }
  .toggle-container { text-align: center; margin-bottom: 16px; }
  .toggle-btn { background: #334155; color: #94a3b8; border: 1px solid #475569; padding: 8px 20px; cursor: pointer; font-size: 0.95em; transition: all 0.2s; }
  .toggle-btn:first-child { border-radius: 8px 0 0 8px; }
  .toggle-btn:last-child { border-radius: 0 8px 8px 0; }
  .toggle-btn.active { background: #3b82f6; color: white; border-color: #3b82f6; }
  .toggle-btn:hover { background: #475569; color: #e2e8f0; }
  .toggle-btn.active:hover { background: #2563eb; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 24px; }
  th { text-align: left; padding: 10px 12px; border-bottom: 2px solid #334155; color: #94a3b8; font-size: 0.85em; text-transform: uppercase; }
  td { padding: 8px 12px; border-bottom: 1px solid #1e293b; font-size: 0.95em; }
  tr:hover td { background: #1e293b; }
  .rank { color: #64748b; font-weight: 600; width: 40px; }
  .score { font-weight: 700; color: #34d399; }
  .year { color: #a78bfa; font-weight: 600; }
  .hot-val { color: #22c55e; font-weight: 700; }
  .cold-val { color: #ef4444; font-weight: 700; }
  .hot-tag { background: #22c55e22; color: #22c55e; padding: 2px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 700; }
  .cold-tag { background: #ef444422; color: #ef4444; padding: 2px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 700; }
  .steady-tag { background: #64748b22; color: #64748b; padding: 2px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 700; }
  th.sortable { cursor: pointer; user-select: none; position: relative; padding-right: 18px; }
  th.sortable:hover { color: #e2e8f0; }
  th.sortable::after { content: '\2195'; position: absolute; right: 4px; opacity: 0.3; font-size: 0.8em; }
  th.sortable.asc::after { content: '\2191'; opacity: 0.8; }
  th.sortable.desc::after { content: '\2193'; opacity: 0.8; }
  .best-table td:first-child { font-size: 1.2em; width: 36px; text-align: center; }
  .archive-badge { display: inline-block; background: #334155; color: #94a3b8; padding: 4px 16px; border-radius: 20px; font-size: 0.85em; margin-bottom: 8px; }
  @media (max-width: 640px) {
    body { padding: 10px; }
    h1 { font-size: 1.4em; }
    h2 { font-size: 0.95em; }
    h3 { font-size: 1.1em; }
    .chart-box { height: 300px; padding: 12px; }
    .toggle-btn { padding: 6px 12px; font-size: 0.82em; }
    th { padding: 8px 6px; font-size: 0.75em; }
    td { padding: 6px 6px; font-size: 0.82em; }
  }
</style>
</head>
<body>
<div id="nav"></div>
<script src="nav.js"></script>
<div class="container">
<h1>Summertime Sadness Fantasy Baseball</h1>
<div style="text-align:center"><span class="archive-badge">Season Archive</span></div>
<h2>2023 Season Trends</h2>

<div class="toggle-container">
  <button class="toggle-btn active" onclick="showChart('score')">Normalized Score</button>
  <button class="toggle-btn" onclick="showChart('rank')">Power Rank</button>
</div>

<div class="chart-box" id="scoreBox">
<canvas id="scoreChart"></canvas>
</div>

<div class="chart-box" id="rankBox" style="display:none">
<canvas id="rankChart"></canvas>
</div>


<h3>Expected Category Wins by Week</h3>
<p class="section-desc">Each team's expected category wins per week based on all-play H2H simulation. Higher = dominated the field that week.</p>
<div class="chart-box">
<canvas id="xwinsChart"></canvas>
</div>

<h3>Cumulative Expected Wins</h3>
<p class="section-desc">Running total of expected category wins. Steeper slopes = hot streaks.</p>
<div class="chart-box">
<canvas id="cumChart"></canvas>
</div>

<h3>Batter vs Pitcher Performance</h3>
<p class="section-desc">Batting win rate (x) vs pitching win rate (y) from all-play H2H. Top-right = elite at both.</p>
<div class="chart-box">
<canvas id="scatterChart"></canvas>
</div>

<h3>Who's Hot / Who's Not</h3>
<p class="section-desc">Last 2 weeks (Weeks 19-20) vs season average.</p>
<table class="sortable-table">
<tr><th class="sortable" data-type="num">#</th><th class="sortable" data-type="str">Team</th><th class="sortable" data-type="num">Last 2 Wk Avg</th><th class="sortable" data-type="num">Season Avg</th><th class="sortable" data-type="num">Diff</th><th class="sortable" data-type="str">Trend</th></tr>
<tr><td class="rank">1</td><td><span style="color:#22c55e">&#9679;</span> McLainBang</td><td class="score">7.23</td><td>6.12</td><td class="hot-val">+1.11</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">2</td><td><span style="color:#ef4444">&#9679;</span> Moniebol üê≥ (DEFCON 2)</td><td class="score">7.00</td><td>6.55</td><td class="hot-val">+0.45</td><td><span class="steady-tag">STEADY</span></td></tr><tr><td class="rank">3</td><td><span style="color:#f97316">&#9679;</span> The Rosterbation Station</td><td class="score">6.68</td><td>6.67</td><td class="hot-val">+0.01</td><td><span class="steady-tag">STEADY</span></td></tr><tr><td class="rank">4</td><td><span style="color:#10b981">&#9679;</span> The Dollar General</td><td class="score">6.41</td><td>5.12</td><td class="hot-val">+1.29</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">5</td><td><span style="color:#8b5cf6">&#9679;</span> scoopski potatoes</td><td class="score">6.32</td><td>5.52</td><td class="hot-val">+0.8</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">6</td><td><span style="color:#3b82f6">&#9679;</span> WanderingAroundTheMiddleSchool</td><td class="score">6.14</td><td>5.63</td><td class="hot-val">+0.51</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">7</td><td><span style="color:#eab308">&#9679;</span> [z-ro] i‚Äôd really like to‚Ä¶TY!</td><td class="score">6.05</td><td>6.17</td><td class="cold-val">-0.13</td><td><span class="steady-tag">STEADY</span></td></tr><tr><td class="rank">8</td><td><span style="color:#ec4899">&#9679;</span> Bry Bry‚Äôs Bible Bonkers</td><td class="score">5.00</td><td>5.16</td><td class="cold-val">-0.16</td><td><span class="steady-tag">STEADY</span></td></tr><tr><td class="rank">9</td><td><span style="color:#a855f7">&#9679;</span> Camp Lejeune</td><td class="score">4.77</td><td>4.99</td><td class="cold-val">-0.21</td><td><span class="steady-tag">STEADY</span></td></tr><tr><td class="rank">10</td><td><span style="color:#06b6d4">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬Ø</td><td class="score">4.50</td><td>5.28</td><td class="cold-val">-0.78</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">11</td><td><span style="color:#f59e0b">&#9679;</span> How to lose a game in 10 days</td><td class="score">4.32</td><td>4.88</td><td class="cold-val">-0.56</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">12</td><td><span style="color:#14b8a6">&#9679;</span> Ian Cumsler</td><td class="score">3.55</td><td>5.48</td><td class="cold-val">-1.94</td><td><span class="cold-tag">COLD</span></td></tr>
</table>

<h3>Season's Best Weekly Performances</h3>
<p class="section-desc">Best (or lowest for ERA/WHIP) team stat in any week.</p>
<table class="best-table">
<tr><th></th><th>Category</th><th>Value</th><th>Team</th><th>Week</th></tr>
<tr><td>&#x26BE;</td><td class="year">Runs</td><td class="score">60</td><td><span style="color:#06b6d4">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬Ø</td><td class="year">Week 15</td></tr><tr><td>&#x26BE;</td><td class="year">Hits</td><td class="score">110</td><td><span style="color:#14b8a6">&#9679;</span> Ian Cumsler</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">Home Runs</td><td class="score">20</td><td><span style="color:#eab308">&#9679;</span> [z-ro] i‚Äôd really like to‚Ä¶TY!</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">RBI</td><td class="score">60</td><td><span style="color:#14b8a6">&#9679;</span> Ian Cumsler</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">Stolen Bases</td><td class="score">17</td><td><span style="color:#22c55e">&#9679;</span> McLainBang</td><td class="year">Week 17</td></tr><tr><td>&#x26BE;</td><td class="year">OPS</td><td class="score">1.047</td><td><span style="color:#3b82f6">&#9679;</span> WanderingAroundTheMiddleSchool</td><td class="year">Week 2</td></tr><tr><td>&#x1F3AF;</td><td class="year">HR Allowed (Lowest)</td><td class="score">26</td><td><span style="color:#10b981">&#9679;</span> The Dollar General</td><td class="year">Week 15</td></tr><tr><td>&#x1F3AF;</td><td class="year">K/9</td><td class="score">13.9</td><td><span style="color:#3b82f6">&#9679;</span> WanderingAroundTheMiddleSchool</td><td class="year">Week 4</td></tr><tr><td>&#x1F3AF;</td><td class="year">Quality Starts</td><td class="score">8</td><td><span style="color:#8b5cf6">&#9679;</span> scoopski potatoes</td><td class="year">Week 12</td></tr><tr><td>&#x1F3AF;</td><td class="year">Saves+Holds</td><td class="score">18</td><td><span style="color:#10b981">&#9679;</span> The Dollar General</td><td class="year">Week 15</td></tr><tr><td>&#x1F3AF;</td><td class="year">ERA (Lowest)</td><td class="score">0.630</td><td><span style="color:#06b6d4">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬Ø</td><td class="year">Week 12</td></tr><tr><td>&#x1F3AF;</td><td class="year">WHIP (Lowest)</td><td class="score">0.650</td><td><span style="color:#06b6d4">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬Ø</td><td class="year">Week 12</td></tr>
</table>

</div>
<script>
const legendOpts = {
  position: 'bottom',
  labels: { color: '#e2e8f0', padding: 16, font: { size: 12 }, usePointStyle: true, pointStyle: 'circle' }
};
const tooltipOpts = {
  backgroundColor: '#1e293b', titleColor: '#e2e8f0', bodyColor: '#94a3b8',
  borderColor: '#475569', borderWidth: 1, padding: 12
};

// ---- Power Score ----
new Chart(document.getElementById('scoreChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Week 1", "Week 2", "Week 3", "Week 4", "Week 5", "Week 6", "Week 7", "Week 8", "Week 9", "Week 10", "Week 11", "Week 12", "Week 13", "Week 14", "Week 15", "Week 16", "Week 17", "Week 18", "Week 19", "Week 20"], datasets: [{
      label: 'Moniebol üê≥ (DEFCON 2)',
      data: [637.3, 810.1, 890.3, 880.3, 951.3, 938.5, 901.2, 933.2, 937.5, 954.7, 979.1, 938.6, 974.8, 964.9, 967.5, 961.4, 974.5, 953.3, 980.3, 982.3],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Rosterbation Station',
      data: [562.2, 755.4, 703.7, 749.1, 730.3, 795.1, 810.6, 852.5, 847.0, 895.8, 920.2, 915.0, 877.4, 914.5, 876.6, 826.8, 826.8, 809.6, 805.5, 839.1],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '[z-ro] i‚Äôd really like to‚Ä¶TY!',
      data: [740.8, 751.2, 597.3, 634.7, 617.5, 657.1, 711.7, 721.0, 748.6, 734.1, 740.4, 751.8, 777.2, 762.5, 742.3, 742.2, 749.5, 748.0, 760.8, 763.0],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'McLainBang',
      data: [726.9, 786.0, 674.2, 701.9, 647.0, 648.9, 555.9, 548.8, 572.2, 621.5, 711.0, 700.5, 689.1, 696.3, 690.8, 703.5, 718.4, 717.2, 739.5, 757.5],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [789.9, 714.4, 595.6, 608.4, 601.5, 606.2, 633.4, 625.9, 592.3, 602.8, 617.6, 644.0, 687.6, 698.8, 702.2, 688.3, 680.1, 678.9, 662.7, 635.7],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'WanderingAroundTheMiddleSchool',
      data: [307.8, 527.2, 500.9, 596.3, 498.3, 451.3, 464.4, 523.2, 559.0, 569.4, 545.0, 560.0, 591.4, 616.5, 574.6, 541.5, 547.1, 574.1, 596.9, 611.4],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'scoopski potatoes',
      data: [465.9, 473.4, 385.2, 503.6, 476.7, 456.4, 496.9, 546.9, 535.1, 560.9, 601.7, 612.6, 624.1, 605.4, 615.3, 600.0, 588.6, 578.9, 601.3, 587.3],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Bry Bry‚Äôs Bible Bonkers',
      data: [610.1, 521.3, 443.0, 554.4, 591.3, 611.3, 556.5, 581.8, 571.1, 592.8, 588.5, 580.1, 600.0, 584.0, 570.8, 538.9, 557.7, 559.3, 563.0, 552.7],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [543.4, 425.8, 376.2, 391.1, 461.9, 455.3, 470.6, 516.5, 457.2, 491.3, 495.6, 532.9, 550.9, 564.0, 571.9, 591.6, 605.3, 550.2, 543.8, 536.6],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'How to lose a game in 10 days',
      data: [492.9, 483.0, 332.3, 378.8, 487.1, 500.5, 619.4, 607.5, 610.9, 620.6, 625.4, 586.1, 583.8, 555.2, 573.4, 555.8, 506.6, 501.8, 525.6, 504.7],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Dollar General',
      data: [603.7, 616.4, 657.0, 544.7, 554.9, 552.2, 569.3, 608.6, 566.9, 550.8, 519.0, 528.8, 493.3, 514.1, 461.7, 438.7, 421.9, 404.0, 429.4, 436.8],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Camp Lejeune',
      data: [670.7, 644.0, 510.0, 520.2, 489.0, 488.9, 432.3, 422.4, 385.8, 426.6, 424.4, 423.8, 415.1, 399.5, 382.9, 444.0, 433.0, 442.3, 436.4, 432.0],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(1) } } },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { ticks: { color: '#94a3b8' }, grid: { color: '#334155' }, title: { display: true, text: 'Normalized Score', color: '#64748b' } }
    }
  }
});

// ---- Power Rank ----
new Chart(document.getElementById('rankChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Week 1", "Week 2", "Week 3", "Week 4", "Week 5", "Week 6", "Week 7", "Week 8", "Week 9", "Week 10", "Week 11", "Week 12", "Week 13", "Week 14", "Week 15", "Week 16", "Week 17", "Week 18", "Week 19", "Week 20"], datasets: [{
      label: 'Moniebol üê≥ (DEFCON 2)',
      data: [4.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Rosterbation Station',
      data: [8.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '[z-ro] i‚Äôd really like to‚Ä¶TY!',
      data: [3.0, 5.0, 6.0, 5.0, 4.0, 4.0, 3.0, 3.0, 3.0, 3.0, 4.0, 3.0, 3.0, 3.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'McLainBang',
      data: [2.0, 1.0, 3.0, 3.0, 3.0, 3.0, 7.0, 9.0, 5.0, 4.0, 3.0, 4.0, 4.0, 4.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [1.0, 4.0, 5.0, 4.0, 6.0, 6.0, 4.0, 4.0, 6.0, 6.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 6.0],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'WanderingAroundTheMiddleSchool',
      data: [12.0, 8.5, 7.0, 6.0, 9.0, 10.5, 9.0, 8.0, 8.0, 7.5, 8.0, 9.0, 7.5, 6.5, 8.0, 9.5, 10.0, 8.0, 7.0, 5.0],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'scoopski potatoes',
      data: [11.0, 12.0, 11.0, 10.0, 11.0, 12.0, 11.0, 11.0, 10.0, 9.5, 9.0, 8.0, 9.0, 9.0, 6.0, 6.0, 7.0, 9.0, 6.0, 7.0],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Bry Bry‚Äôs Bible Bonkers',
      data: [7.0, 8.5, 9.0, 7.0, 4.0, 5.0, 8.0, 6.0, 7.0, 7.5, 7.0, 7.0, 7.5, 8.0, 10.0, 9.5, 9.0, 7.0, 8.0, 9.5],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [9.0, 11.0, 12.0, 12.0, 12.0, 10.5, 10.0, 10.0, 11.0, 11.0, 11.0, 11.0, 11.0, 11.0, 9.0, 8.0, 6.0, 6.0, 9.0, 9.5],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'How to lose a game in 10 days',
      data: [10.0, 10.0, 10.0, 11.0, 10.0, 9.0, 5.0, 7.0, 4.0, 5.0, 6.0, 6.0, 6.0, 6.5, 7.0, 7.0, 8.0, 10.0, 10.0, 8.0],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Dollar General',
      data: [6.0, 6.0, 4.0, 9.0, 7.0, 8.0, 6.0, 5.0, 9.0, 9.5, 10.0, 10.0, 10.0, 10.0, 11.0, 12.0, 12.0, 12.0, 12.0, 12.0],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Camp Lejeune',
      data: [5.0, 7.0, 8.0, 8.0, 8.0, 7.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 11.0, 11.0, 11.0, 11.0, 11.0],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: tooltipOpts },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { reverse: true, min: 1, max: 12, ticks: { color: '#94a3b8', stepSize: 1 }, grid: { color: '#334155' }, title: { display: true, text: 'Power Rank', color: '#64748b' } }
    }
  }
});

// ---- xWins by Week ----
new Chart(document.getElementById('xwinsChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Wk 1", "Wk 2", "Wk 3", "Wk 4", "Wk 5", "Wk 6", "Wk 7", "Wk 8", "Wk 9", "Wk 10", "Wk 11", "Wk 12", "Wk 13", "Wk 14", "Wk 15", "Wk 16", "Wk 17", "Wk 18", "Wk 19", "Wk 20"], datasets: [{
      label: 'Moniebol üê≥ (DEFCON 2)',
      data: [5.55, 8.36, 7.64, 4.45, 6.82, 7.55, 5.64, 6.73, 7.0, 5.82, 7.27, 4.45, 9.64, 5.73, 6.64, 5.27, 8.0, 4.36, 7.73, 6.27],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Rosterbation Station',
      data: [5.64, 9.27, 7.36, 6.09, 6.64, 6.36, 7.91, 7.55, 6.64, 7.0, 6.36, 7.36, 4.09, 9.73, 4.45, 3.0, 7.73, 6.82, 4.55, 8.82],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '[z-ro] i‚Äôd really like to‚Ä¶TY!',
      data: [7.27, 7.27, 4.09, 6.64, 6.64, 4.55, 7.82, 3.91, 7.73, 5.73, 6.45, 5.82, 6.91, 3.82, 6.0, 6.64, 6.82, 7.27, 7.09, 5.0],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'McLainBang',
      data: [7.09, 6.45, 4.55, 7.0, 3.82, 5.91, 1.36, 4.0, 6.27, 7.27, 8.82, 6.36, 6.73, 6.18, 7.18, 6.82, 6.55, 5.55, 6.64, 7.82],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [7.18, 5.09, 5.0, 4.82, 7.64, 4.45, 6.91, 2.73, 5.27, 5.73, 6.45, 8.09, 6.82, 5.0, 5.18, 5.0, 4.55, 6.64, 3.91, 3.18],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'WanderingAroundTheMiddleSchool',
      data: [3.18, 6.0, 6.45, 6.64, 4.0, 4.91, 6.55, 8.27, 7.91, 5.0, 3.0, 5.82, 6.82, 6.82, 2.73, 4.45, 4.18, 7.55, 7.0, 5.27],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'scoopski potatoes',
      data: [4.18, 4.0, 4.09, 8.64, 4.18, 4.55, 6.55, 7.27, 5.0, 5.09, 6.45, 7.0, 5.27, 4.36, 7.09, 5.0, 4.64, 4.45, 6.91, 5.73],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Bry Bry‚Äôs Bible Bonkers',
      data: [6.73, 2.91, 4.82, 7.82, 6.18, 6.55, 4.0, 6.73, 4.09, 4.18, 3.64, 4.45, 5.64, 5.27, 4.64, 4.36, 6.64, 4.64, 4.91, 5.09],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [4.91, 3.18, 5.73, 4.0, 4.36, 6.45, 5.27, 5.09, 3.82, 6.36, 6.36, 4.73, 4.82, 6.91, 6.0, 8.27, 6.36, 4.0, 4.36, 4.64],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'How to lose a game in 10 days',
      data: [5.18, 5.45, 3.64, 4.27, 4.64, 8.36, 8.0, 3.82, 6.09, 5.82, 5.36, 2.73, 4.45, 2.27, 7.36, 4.82, 2.18, 4.45, 5.64, 3.0],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Dollar General',
      data: [5.36, 4.73, 8.09, 3.09, 5.18, 5.91, 5.82, 5.82, 4.18, 2.55, 2.73, 5.0, 3.27, 8.18, 5.73, 4.0, 4.64, 5.36, 5.27, 7.55],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Camp Lejeune',
      data: [6.82, 5.18, 4.73, 4.55, 6.55, 2.55, 2.55, 4.18, 3.64, 6.45, 4.64, 5.18, 4.36, 3.64, 5.09, 9.0, 5.18, 5.91, 3.82, 5.73],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(2) } } },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { min: 0, max: 12, ticks: { color: '#94a3b8' }, grid: { color: '#334155' }, title: { display: true, text: 'Expected Category Wins', color: '#64748b' } }
    }
  }
});

// ---- Cumulative xWins ----
new Chart(document.getElementById('cumChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Wk 1", "Wk 2", "Wk 3", "Wk 4", "Wk 5", "Wk 6", "Wk 7", "Wk 8", "Wk 9", "Wk 10", "Wk 11", "Wk 12", "Wk 13", "Wk 14", "Wk 15", "Wk 16", "Wk 17", "Wk 18", "Wk 19", "Wk 20"], datasets: [{
      label: 'Moniebol üê≥ (DEFCON 2)',
      data: [5.5, 13.9, 21.5, 26.0, 32.8, 40.4, 46.0, 52.7, 59.7, 65.5, 72.8, 77.3, 86.9, 92.6, 99.3, 104.5, 112.5, 116.9, 124.6, 130.9],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Rosterbation Station',
      data: [5.6, 14.9, 22.3, 28.4, 35.0, 41.4, 49.3, 56.8, 63.5, 70.5, 76.8, 84.2, 88.3, 98.0, 102.5, 105.5, 113.2, 120.0, 124.5, 133.4],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '[z-ro] i‚Äôd really like to‚Ä¶TY!',
      data: [7.3, 14.5, 18.6, 25.3, 31.9, 36.5, 44.3, 48.2, 55.9, 61.6, 68.1, 73.9, 80.8, 84.6, 90.6, 97.3, 104.1, 111.4, 118.5, 123.5],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'McLainBang',
      data: [7.1, 13.5, 18.1, 25.1, 28.9, 34.8, 36.2, 40.2, 46.5, 53.7, 62.5, 68.9, 75.6, 81.8, 89.0, 95.8, 102.4, 107.9, 114.5, 122.4],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [7.2, 12.3, 17.3, 22.1, 29.7, 34.2, 41.1, 43.8, 49.1, 54.8, 61.3, 69.4, 76.2, 81.2, 86.4, 91.4, 95.9, 102.5, 106.5, 109.6],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'WanderingAroundTheMiddleSchool',
      data: [3.2, 9.2, 15.6, 22.3, 26.3, 31.2, 37.7, 46.0, 53.9, 58.9, 61.9, 67.7, 74.5, 81.4, 84.1, 88.5, 92.7, 100.3, 107.3, 112.5],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'scoopski potatoes',
      data: [4.2, 8.2, 12.3, 20.9, 25.1, 29.6, 36.2, 43.5, 48.5, 53.5, 60.0, 67.0, 72.3, 76.6, 83.7, 88.7, 93.4, 97.8, 104.7, 110.5],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Bry Bry‚Äôs Bible Bonkers',
      data: [6.7, 9.6, 14.5, 22.3, 28.5, 35.0, 39.0, 45.7, 49.8, 54.0, 57.6, 62.1, 67.7, 73.0, 77.6, 82.0, 88.6, 93.3, 98.2, 103.3],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [4.9, 8.1, 13.8, 17.8, 22.2, 28.6, 33.9, 39.0, 42.8, 49.2, 55.5, 60.3, 65.1, 72.0, 78.0, 86.3, 92.6, 96.6, 101.0, 105.6],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'How to lose a game in 10 days',
      data: [5.2, 10.6, 14.3, 18.5, 23.2, 31.5, 39.5, 43.4, 49.5, 55.3, 60.6, 63.4, 67.8, 70.1, 77.5, 82.3, 84.5, 88.9, 94.5, 97.5],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Dollar General',
      data: [5.4, 10.1, 18.2, 21.3, 26.5, 32.4, 38.2, 44.0, 48.2, 50.7, 53.5, 58.5, 61.7, 69.9, 75.6, 79.6, 84.3, 89.6, 94.9, 102.5],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Camp Lejeune',
      data: [6.8, 12.0, 16.7, 21.3, 27.8, 30.4, 32.9, 37.1, 40.7, 47.2, 51.8, 57.0, 61.4, 65.0, 70.1, 79.1, 84.3, 90.2, 94.0, 99.7],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(1) } } },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { ticks: { color: '#94a3b8' }, grid: { color: '#334155' }, title: { display: true, text: 'Cumulative Expected Wins', color: '#64748b' } }
    }
  }
});

// ---- Scatter ----
const quadrantPlugin = {
  id: 'quadrant',
  beforeDraw(chart) {
    const {ctx, scales: {x, y}} = chart;
    const x50 = x.getPixelForValue(50), y50 = y.getPixelForValue(50);
    ctx.save();
    ctx.strokeStyle = '#47556966'; ctx.lineWidth = 1; ctx.setLineDash([5, 5]);
    ctx.beginPath(); ctx.moveTo(x50, y.top); ctx.lineTo(x50, y.bottom); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(x.left, y50); ctx.lineTo(x.right, y50); ctx.stroke();
    ctx.fillStyle = '#47556955'; ctx.font = '11px Segoe UI'; ctx.textAlign = 'center';
    const lx = x.getPixelForValue((x.min+50)/2), rx = x.getPixelForValue((x.max+50)/2);
    const ty = y.getPixelForValue((y.max+50)/2), by = y.getPixelForValue((y.min+50)/2);
    ctx.fillText('Pitching Carry', lx, ty); ctx.fillText('Elite', rx, ty);
    ctx.fillText('Struggling', lx, by); ctx.fillText('Batting Carry', rx, by);
    ctx.restore();
  }
};
const labelPlugin = {
  id: 'scatterLabels',
  afterDatasetDraw(chart) {
    const {ctx} = chart;
    chart.data.datasets.forEach((ds, i) => {
      chart.getDatasetMeta(i).data.forEach(pt => {
        ctx.save(); ctx.font = '10px Segoe UI'; ctx.fillStyle = '#94a3b8'; ctx.textAlign = 'center';
        ctx.fillText(ds.label, pt.x, pt.y - 14); ctx.restore();
      });
    });
  }
};
new Chart(document.getElementById('scatterChart').getContext('2d'), {
  type: 'scatter',
  data: { datasets: [{
      label: 'Moniebol üê≥ (DEFCON 2)',
      data: [{x: 54.3, y: 54.8}],
      backgroundColor: '#ef4444', borderColor: '#ef4444',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'The Rosterbation Station',
      data: [{x: 57.7, y: 53.4}],
      backgroundColor: '#f97316', borderColor: '#f97316',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: '[z-ro] i‚Äôd really like to‚Ä¶TY!',
      data: [{x: 67.0, y: 35.9}],
      backgroundColor: '#eab308', borderColor: '#eab308',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'McLainBang',
      data: [{x: 50.4, y: 51.6}],
      backgroundColor: '#22c55e', borderColor: '#22c55e',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Ian Cumsler',
      data: [{x: 56.1, y: 35.2}],
      backgroundColor: '#14b8a6', borderColor: '#14b8a6',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'WanderingAroundTheMiddleSchool',
      data: [{x: 52.0, y: 41.7}],
      backgroundColor: '#3b82f6', borderColor: '#3b82f6',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'scoopski potatoes',
      data: [{x: 44.3, y: 47.7}],
      backgroundColor: '#8b5cf6', borderColor: '#8b5cf6',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Bry Bry‚Äôs Bible Bonkers',
      data: [{x: 37.7, y: 48.4}],
      backgroundColor: '#ec4899', borderColor: '#ec4899',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [{x: 43.3, y: 44.7}],
      backgroundColor: '#06b6d4', borderColor: '#06b6d4',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'How to lose a game in 10 days',
      data: [{x: 32.2, y: 49.1}],
      backgroundColor: '#f59e0b', borderColor: '#f59e0b',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'The Dollar General',
      data: [{x: 39.1, y: 46.3}],
      backgroundColor: '#10b981', borderColor: '#10b981',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Camp Lejeune',
      data: [{x: 33.9, y: 49.2}],
      backgroundColor: '#a855f7', borderColor: '#a855f7',
      pointRadius: 8, pointHoverRadius: 11
    }] },
  plugins: [quadrantPlugin, labelPlugin],
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 28, right: 40, bottom: 8, left: 8 } },
    plugins: {
      legend: { display: false },
      tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ' - Bat: ' + ctx.parsed.x.toFixed(1) + '%, Pitch: ' + ctx.parsed.y.toFixed(1) + '%' } }
    },
    scales: {
      x: { title: { display: true, text: 'Batting Win %', color: '#64748b' }, ticks: { color: '#94a3b8', callback: v => v + '%' }, grid: { color: '#334155' } },
      y: { title: { display: true, text: 'Pitching Win %', color: '#64748b' }, ticks: { color: '#94a3b8', callback: v => v + '%' }, grid: { color: '#334155' } }
    }
  }
});

// ---- Toggle ----
function showChart(type) {
  document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
  if (type === 'score') {
    document.getElementById('scoreBox').style.display = 'block';
    document.getElementById('rankBox').style.display = 'none';
    document.querySelectorAll('.toggle-btn')[0].classList.add('active');
  } else {
    document.getElementById('scoreBox').style.display = 'none';
    document.getElementById('rankBox').style.display = 'block';
    document.querySelectorAll('.toggle-btn')[1].classList.add('active');
  }
}

// ---- Sortable tables ----
document.querySelectorAll('th.sortable').forEach(th => {
  th.addEventListener('click', () => {
    const tbl = th.closest('table');
    const idx = Array.from(th.parentElement.children).indexOf(th);
    const rows = Array.from(tbl.querySelectorAll('tr')).slice(1);
    const type = th.dataset.type || 'str';
    const isAsc = th.classList.contains('asc');
    th.parentElement.querySelectorAll('th').forEach(h => h.classList.remove('asc', 'desc'));
    th.classList.add(isAsc ? 'desc' : 'asc');
    const getVal = (row, i) => {
      const text = row.children[i].textContent.trim();
      if (type === 'num') return parseFloat(text.replace(/[+#]/g, '')) || 0;
      return text.toLowerCase();
    };
    rows.sort((a, b) => {
      const va = getVal(a, idx), vb = getVal(b, idx);
      const cmp = typeof va === 'string' ? va.localeCompare(vb) : va - vb;
      return isAsc ? -cmp : cmp;
    });
    const tbody = tbl.querySelector('tbody') || tbl;
    rows.forEach(r => tbody.appendChild(r));
  });
});
</script>
</body>
</html>