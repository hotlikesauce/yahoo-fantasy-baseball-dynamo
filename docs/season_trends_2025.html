<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Summertime Sadness - 2025 Season Trends</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0f172a; color: #e2e8f0; font-family: 'Segoe UI', system-ui, sans-serif; padding: 24px; }
  .container { max-width: 1400px; margin: 0 auto; }
  h1 { text-align: center; font-size: 2em; margin-bottom: 4px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  h2 { text-align: center; color: #64748b; font-size: 1.1em; margin-bottom: 24px; }
  h3 { color: #38bdf8; margin: 32px 0 12px; font-size: 1.3em; border-bottom: 1px solid #1e293b; padding-bottom: 8px; }
  .section-desc { color: #94a3b8; font-size: 0.9em; margin-bottom: 16px; }
  .chart-box { background: #1e293b; border-radius: 12px; padding: 24px; margin-bottom: 24px; position: relative; height: 550px; }
  .toggle-container { text-align: center; margin-bottom: 16px; }
  .toggle-btn { background: #334155; color: #94a3b8; border: 1px solid #475569; padding: 8px 20px; cursor: pointer; font-size: 0.95em; transition: all 0.2s; }
  .toggle-btn:first-child { border-radius: 8px 0 0 8px; }
  .toggle-btn:last-child { border-radius: 0 8px 8px 0; }
  .toggle-btn.active { background: #3b82f6; color: white; border-color: #3b82f6; }
  .toggle-btn:hover { background: #475569; color: #e2e8f0; }
  .toggle-btn.active:hover { background: #2563eb; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 24px; }
  th { text-align: left; padding: 10px 12px; border-bottom: 2px solid #334155; color: #94a3b8; font-size: 0.85em; text-transform: uppercase; }
  td { padding: 8px 12px; border-bottom: 1px solid #1e293b; font-size: 0.95em; }
  tr:hover td { background: #1e293b; }
  .rank { color: #64748b; font-weight: 600; width: 40px; }
  .score { font-weight: 700; color: #34d399; }
  .year { color: #a78bfa; font-weight: 600; }
  .hot-val { color: #22c55e; font-weight: 700; }
  .cold-val { color: #ef4444; font-weight: 700; }
  .hot-tag { background: #22c55e22; color: #22c55e; padding: 2px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 700; letter-spacing: 0.05em; }
  .cold-tag { background: #ef444422; color: #ef4444; padding: 2px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 700; letter-spacing: 0.05em; }
  .steady-tag { background: #64748b22; color: #64748b; padding: 2px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 700; letter-spacing: 0.05em; }
  th.sortable { cursor: pointer; user-select: none; position: relative; padding-right: 18px; }
  th.sortable:hover { color: #e2e8f0; }
  th.sortable::after { content: '\2195'; position: absolute; right: 4px; opacity: 0.3; font-size: 0.8em; }
  th.sortable.asc::after { content: '\2191'; opacity: 0.8; }
  th.sortable.desc::after { content: '\2193'; opacity: 0.8; }
  .best-table td:first-child { font-size: 1.2em; width: 36px; text-align: center; }
</style>
</head>
<body>
<div id="nav"></div>
<script src="nav.js"></script>
<div class="container">
<h1>Summertime Sadness Fantasy Baseball</h1>
<h2>2025 Season Trends</h2>

<p class="section-desc" style="text-align:center; margin-bottom:20px">Power Score = sum of normalized scores across all 12 H2H categories (each scored 0&ndash;100 based on league-wide ranking). A perfect 1200 means first in every category. 0 means last in everything. Power Rank is the 1&ndash;12 ordering of Power Scores each week.</p>

<div class="toggle-container">
  <button class="toggle-btn active" onclick="showChart('score')">Power Score</button>
  <button class="toggle-btn" onclick="showChart('rank')">Power Rank</button>
</div>

<div class="chart-box" id="scoreBox">
<canvas id="scoreChart"></canvas>
</div>

<div class="chart-box" id="rankBox" style="display:none">
<canvas id="rankChart"></canvas>
</div>

<h3>Expected Category Wins by Week</h3>
<p class="section-desc">Each team's expected category wins per week based on all-play H2H simulation (every team vs every team, 12 categories). Higher = dominated the field that week. Range is 0-12.</p>
<div class="chart-box">
<canvas id="xwinsChart"></canvas>
</div>

<h3>Cumulative Expected Wins</h3>
<p class="section-desc">Running total of expected category wins over the season. Steeper slopes = hot streaks. Flatter = cold stretches. The gap between lines shows separation between teams.</p>
<div class="chart-box">
<canvas id="cumChart"></canvas>
</div>

<h3>Batter vs Pitcher Performance</h3>
<p class="section-desc">Each team's batting win rate (x-axis) vs pitching win rate (y-axis) from all-play H2H. Batting = R, H, HR, RBI, SB, OPS, TB. Pitching = K/9, QS, SVH, ERA, WHIP. Top-right = elite at both. Dashed lines at 50%.</p>
<div class="chart-box">
<canvas id="scatterChart"></canvas>
</div>

<h3>Who's Hot / Who's Not</h3>
<p class="section-desc">Average expected category wins over the last 2 weeks (Weeks 19-20) vs season average. A team trending above their season average is heating up.</p>
<table class="sortable-table">
<tr><th class="sortable" data-type="num">#</th><th class="sortable" data-type="str">Team</th><th class="sortable" data-type="num">Last 2 Wk Avg</th><th class="sortable" data-type="num">Season Avg</th><th class="sortable" data-type="num">Diff</th><th class="sortable" data-type="str">Trend</th></tr>
<tr><td class="rank">1</td><td><span style="color:#f97316">&#9679;</span> Moniebol üê≥</td><td class="score">7.68</td><td>6.69</td><td class="hot-val">+1.0</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">2</td><td><span style="color:#8b5cf6">&#9679;</span> OG9Ô∏è‚É£</td><td class="score">7.36</td><td>5.71</td><td class="hot-val">+1.65</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">3</td><td><span style="color:#3b82f6">&#9679;</span> @DoodlesAnalytics</td><td class="score">7.00</td><td>6.31</td><td class="hot-val">+0.69</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">4</td><td><span style="color:#eab308">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬Ø</td><td class="score">6.86</td><td>5.98</td><td class="hot-val">+0.89</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">5</td><td><span style="color:#14b8a6">&#9679;</span> Grand Salami Time</td><td class="score">6.73</td><td>6.11</td><td class="hot-val">+0.61</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">6</td><td><span style="color:#ec4899">&#9679;</span> Tegridy</td><td class="score">6.64</td><td>5.66</td><td class="hot-val">+0.97</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">7</td><td><span style="color:#22c55e">&#9679;</span> Hatfield Hurlers</td><td class="score">6.05</td><td>5.91</td><td class="hot-val">+0.14</td><td><span class="steady-tag">STEADY</span></td></tr><tr><td class="rank">8</td><td><span style="color:#ef4444">&#9679;</span> The Rosterbation Station</td><td class="score">5.82</td><td>6.95</td><td class="cold-val">-1.13</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">9</td><td><span style="color:#f59e0b">&#9679;</span> Getting Plowed Again.</td><td class="score">4.82</td><td>4.84</td><td class="cold-val">-0.02</td><td><span class="steady-tag">STEADY</span></td></tr><tr><td class="rank">10</td><td><span style="color:#06b6d4">&#9679;</span> Serafini Hit Squad</td><td class="score">3.55</td><td>5.52</td><td class="cold-val">-1.97</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">11</td><td><span style="color:#a855f7">&#9679;</span> Football Szn</td><td class="score">3.41</td><td>4.17</td><td class="cold-val">-0.76</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">12</td><td><span style="color:#10b981">&#9679;</span> Ian Cumsler</td><td class="score">2.36</td><td>4.26</td><td class="cold-val">-1.9</td><td><span class="cold-tag">COLD</span></td></tr>
</table>

<h3>Season's Best Weekly Performances</h3>
<p class="section-desc">The single best (or lowest for ERA/WHIP) team stat line in any week this season across all 12 scoring categories.</p>
<table class="best-table">
<tr><th></th><th>Category</th><th>Value</th><th>Team</th><th>Week</th></tr>
<tr><td>&#x26BE;</td><td class="year">Runs</td><td class="score">63</td><td><span style="color:#14b8a6">&#9679;</span> Grand Salami Time</td><td class="year">Week 15</td></tr><tr><td>&#x26BE;</td><td class="year">Hits</td><td class="score">100</td><td><span style="color:#06b6d4">&#9679;</span> Serafini Hit Squad</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">Home Runs</td><td class="score">23</td><td><span style="color:#8b5cf6">&#9679;</span> OG9Ô∏è‚É£</td><td class="year">Week 15</td></tr><tr><td>&#x26BE;</td><td class="year">RBI</td><td class="score">63</td><td><span style="color:#14b8a6">&#9679;</span> Grand Salami Time</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">Stolen Bases</td><td class="score">18</td><td><span style="color:#06b6d4">&#9679;</span> Serafini Hit Squad</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">OPS</td><td class="score">0.999</td><td><span style="color:#22c55e">&#9679;</span> Hatfield Hurlers</td><td class="year">Week 5</td></tr><tr><td>&#x26BE;</td><td class="year">Total Bases</td><td class="score">143</td><td><span style="color:#3b82f6">&#9679;</span> @DoodlesAnalytics</td><td class="year">Week 1</td></tr><tr><td>&#x1F3AF;</td><td class="year">K/9</td><td class="score">14.2</td><td><span style="color:#ef4444">&#9679;</span> The Rosterbation Station</td><td class="year">Week 11</td></tr><tr><td>&#x1F3AF;</td><td class="year">Quality Starts</td><td class="score">7</td><td><span style="color:#3b82f6">&#9679;</span> @DoodlesAnalytics</td><td class="year">Week 9</td></tr><tr><td>&#x1F3AF;</td><td class="year">Saves+Holds</td><td class="score">18</td><td><span style="color:#a855f7">&#9679;</span> Football Szn</td><td class="year">Week 1</td></tr><tr><td>&#x1F3AF;</td><td class="year">ERA (Lowest)</td><td class="score">0.890</td><td><span style="color:#06b6d4">&#9679;</span> Serafini Hit Squad</td><td class="year">Week 16</td></tr><tr><td>&#x1F3AF;</td><td class="year">WHIP (Lowest)</td><td class="score">0.620</td><td><span style="color:#f97316">&#9679;</span> Moniebol üê≥</td><td class="year">Week 20</td></tr>
</table>

</div>
<script>
// ---- Chart options shared ----
const legendOpts = {
  position: 'bottom',
  labels: { color: '#e2e8f0', padding: 16, font: { size: 12 }, usePointStyle: true, pointStyle: 'circle' }
};
const tooltipOpts = {
  backgroundColor: '#1e293b', titleColor: '#e2e8f0', bodyColor: '#94a3b8',
  borderColor: '#475569', borderWidth: 1, padding: 12
};

// ---- Power Score Chart ----
new Chart(document.getElementById('scoreChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Week 1", "Week 2", "Week 3", "Week 4", "Week 5", "Week 6", "Week 7", "Week 8", "Week 9", "Week 10", "Week 11", "Week 12", "Week 13", "Week 14", "Week 15", "Week 16", "Week 17", "Week 18", "Week 19", "Week 20"], datasets: [{
      label: 'The Rosterbation Station',
      data: [686.9, 855.9, 837.8, 898.7, 867.3, 909.0, 922.1, 891.1, 872.6, 902.8, 975.4, 1032.2, 1061.9, 1079.2, 1048.4, 1040.8, 1031.1, 997.7, 974.9, 957.7],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Moniebol üê≥',
      data: [624.2, 656.9, 512.8, 584.0, 675.4, 762.0, 825.8, 869.2, 893.7, 944.3, 904.2, 909.9, 884.8, 893.5, 816.4, 789.3, 792.9, 821.0, 834.9, 857.5],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [400.2, 469.2, 436.9, 532.7, 625.1, 647.1, 646.3, 684.1, 672.0, 811.2, 792.5, 729.5, 780.8, 771.0, 809.0, 797.1, 814.6, 825.2, 867.2, 848.6],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hatfield Hurlers',
      data: [572.0, 560.4, 567.6, 496.6, 675.9, 713.8, 690.4, 731.8, 714.5, 833.1, 851.1, 801.9, 831.4, 849.8, 842.2, 850.5, 868.5, 815.2, 799.8, 838.2],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Grand Salami Time',
      data: [718.5, 671.3, 638.8, 715.9, 643.4, 718.4, 714.7, 703.6, 646.8, 756.2, 760.9, 768.7, 754.7, 766.5, 777.6, 811.5, 815.6, 813.6, 780.9, 821.1],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '@DoodlesAnalytics',
      data: [473.1, 558.8, 596.9, 695.0, 701.8, 750.3, 764.5, 723.2, 746.6, 651.5, 672.7, 721.1, 737.3, 750.1, 745.9, 738.2, 776.4, 752.6, 752.1, 771.8],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'OG9Ô∏è‚É£',
      data: [569.9, 556.1, 616.7, 532.4, 526.6, 571.4, 553.2, 534.9, 566.6, 653.5, 537.7, 537.3, 585.6, 602.8, 584.5, 595.6, 590.3, 576.3, 600.1, 628.5],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Tegridy',
      data: [384.4, 385.6, 534.7, 627.3, 608.7, 636.5, 629.9, 594.8, 654.2, 652.1, 619.8, 637.6, 646.5, 621.8, 630.3, 554.7, 596.2, 553.0, 556.7, 609.2],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Serafini Hit Squad',
      data: [801.8, 831.5, 860.3, 815.1, 657.8, 658.2, 689.8, 648.1, 610.0, 668.5, 676.3, 645.5, 642.0, 648.3, 608.9, 666.6, 679.4, 674.2, 619.3, 590.8],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Getting Plowed Again.',
      data: [432.0, 534.5, 417.9, 406.3, 427.3, 489.8, 489.4, 558.7, 565.4, 665.0, 719.2, 705.3, 672.8, 663.3, 586.0, 551.8, 557.9, 558.7, 560.3, 569.9],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [626.4, 520.7, 548.3, 458.3, 358.1, 317.8, 351.8, 363.6, 373.6, 450.1, 467.4, 484.2, 495.4, 462.8, 437.4, 397.3, 408.8, 338.0, 324.2, 329.3],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Football Szn',
      data: [427.1, 411.7, 401.3, 418.5, 367.8, 376.2, 381.0, 332.4, 344.7, 327.0, 294.9, 317.2, 302.0, 237.9, 259.4, 264.1, 320.2, 349.4, 325.4, 329.2],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(1) } } },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { ticks: { color: '#94a3b8' }, grid: { color: '#334155' }, title: { display: true, text: 'Power Score', color: '#64748b' } }
    }
  }
});

// ---- Power Rank Chart ----
new Chart(document.getElementById('rankChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Week 1", "Week 2", "Week 3", "Week 4", "Week 5", "Week 6", "Week 7", "Week 8", "Week 9", "Week 10", "Week 11", "Week 12", "Week 13", "Week 14", "Week 15", "Week 16", "Week 17", "Week 18", "Week 19", "Week 20"], datasets: [{
      label: 'The Rosterbation Station',
      data: [4.0, 2.0, 2.0, 3.0, 1.0, 1.0, 1.5, 2.0, 2.0, 3.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Moniebol üê≥',
      data: [6.0, 4.0, 8.5, 5.0, 5.0, 4.5, 3.0, 1.0, 1.0, 1.0, 3.0, 2.0, 3.0, 3.0, 4.0, 5.0, 5.5, 4.5, 4.0, 3.5],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [9.0, 9.0, 12.0, 9.0, 7.0, 7.0, 7.0, 5.0, 5.0, 4.0, 5.0, 7.0, 4.0, 4.0, 3.0, 4.0, 4.0, 4.5, 2.0, 3.5],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hatfield Hurlers',
      data: [5.0, 5.0, 5.0, 4.0, 2.0, 3.0, 5.0, 4.0, 3.5, 2.0, 2.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 3.0, 2.0],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Grand Salami Time',
      data: [2.0, 3.0, 3.0, 2.0, 3.0, 2.0, 1.5, 3.0, 3.5, 5.0, 4.0, 5.0, 6.0, 6.0, 6.0, 3.0, 3.0, 3.0, 6.0, 5.0],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '@DoodlesAnalytics',
      data: [10.0, 10.0, 8.5, 7.0, 8.0, 6.0, 6.0, 8.0, 8.0, 8.0, 7.0, 4.0, 5.0, 5.0, 5.0, 6.0, 5.5, 6.0, 5.0, 6.0],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'OG9Ô∏è‚É£',
      data: [7.0, 8.0, 4.0, 8.0, 9.0, 9.0, 10.0, 10.0, 10.0, 9.0, 10.0, 10.0, 10.0, 10.0, 10.0, 8.0, 9.0, 10.0, 8.0, 9.0],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Tegridy',
      data: [12.0, 12.0, 7.0, 6.0, 6.0, 8.0, 8.0, 9.0, 9.0, 10.0, 9.0, 9.0, 8.0, 9.0, 7.5, 9.0, 8.0, 8.5, 9.0, 7.0],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Serafini Hit Squad',
      data: [1.0, 1.0, 1.0, 1.0, 4.0, 4.5, 4.0, 6.0, 6.0, 7.0, 8.0, 8.0, 9.0, 8.0, 7.5, 7.0, 7.0, 7.0, 7.0, 8.0],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Getting Plowed Again.',
      data: [8.0, 6.0, 11.0, 12.0, 10.0, 10.0, 9.0, 7.0, 7.0, 6.0, 6.0, 6.0, 7.0, 7.0, 9.0, 10.0, 10.0, 8.5, 10.0, 10.0],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [3.0, 7.0, 6.0, 10.0, 12.0, 12.0, 11.0, 11.0, 11.0, 11.0, 11.0, 11.0, 11.0, 11.0, 11.0, 11.0, 11.0, 12.0, 12.0, 12.0],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Football Szn',
      data: [11.0, 11.0, 10.0, 11.0, 11.0, 11.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 11.0, 11.0, 11.0],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: tooltipOpts },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { reverse: true, min: 1, max: 12, ticks: { color: '#94a3b8', stepSize: 1 }, grid: { color: '#334155' }, title: { display: true, text: 'Power Rank', color: '#64748b' } }
    }
  }
});

// ---- xWins by Week Chart ----
new Chart(document.getElementById('xwinsChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Wk 1", "Wk 2", "Wk 3", "Wk 4", "Wk 5", "Wk 6", "Wk 7", "Wk 8", "Wk 9", "Wk 10", "Wk 11", "Wk 12", "Wk 13", "Wk 14", "Wk 15", "Wk 16", "Wk 17", "Wk 18", "Wk 19", "Wk 20"], datasets: [{
      label: 'The Rosterbation Station',
      data: [7.55, 8.55, 6.55, 7.09, 6.27, 7.09, 7.09, 6.36, 6.09, 5.64, 8.45, 9.27, 8.0, 8.45, 6.82, 4.91, 5.73, 7.45, 6.64, 5.0],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Moniebol üê≥',
      data: [6.45, 6.09, 4.09, 7.64, 7.91, 7.36, 8.18, 8.0, 8.18, 5.91, 5.36, 7.91, 6.18, 6.09, 4.0, 5.73, 6.18, 7.09, 8.27, 7.09],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [4.27, 5.55, 4.45, 6.82, 7.91, 5.09, 5.45, 8.18, 5.36, 8.0, 4.45, 3.0, 7.0, 4.64, 6.27, 4.91, 6.09, 8.36, 9.0, 4.73],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hatfield Hurlers',
      data: [6.09, 6.27, 5.55, 4.0, 8.91, 5.18, 5.0, 7.45, 4.73, 8.82, 5.55, 3.45, 6.73, 6.55, 6.27, 6.0, 5.73, 3.82, 5.0, 7.09],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Grand Salami Time',
      data: [7.27, 4.82, 5.82, 7.27, 3.55, 6.27, 4.91, 5.09, 5.73, 6.27, 6.55, 6.73, 5.55, 6.36, 7.45, 7.36, 5.36, 6.45, 5.82, 7.64],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '@DoodlesAnalytics',
      data: [4.82, 6.55, 6.45, 7.55, 6.45, 7.0, 6.73, 3.36, 5.64, 5.18, 6.64, 7.73, 6.27, 5.55, 7.09, 5.55, 8.27, 5.45, 6.27, 7.73],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'OG9Ô∏è‚É£',
      data: [6.0, 4.18, 6.09, 2.45, 4.73, 6.27, 4.45, 5.0, 5.82, 6.09, 1.73, 6.18, 6.45, 6.45, 6.73, 7.36, 6.36, 7.18, 7.27, 7.45],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Tegridy',
      data: [3.73, 4.55, 8.55, 6.55, 5.91, 5.45, 5.82, 4.36, 8.27, 6.0, 4.82, 5.55, 5.45, 5.73, 6.64, 3.0, 5.91, 3.73, 5.27, 8.0],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Serafini Hit Squad',
      data: [8.0, 7.82, 7.27, 5.27, 3.45, 5.36, 6.55, 4.27, 4.27, 3.36, 6.18, 4.27, 4.0, 6.91, 5.55, 9.09, 5.64, 6.0, 3.36, 3.73],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Getting Plowed Again.',
      data: [4.18, 6.91, 3.18, 4.91, 5.55, 5.27, 4.91, 7.45, 6.0, 5.45, 6.82, 4.45, 3.27, 5.36, 1.73, 3.18, 3.0, 5.45, 4.91, 4.73],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [7.0, 3.36, 5.64, 3.18, 3.36, 3.64, 5.91, 4.64, 4.73, 4.09, 6.91, 5.64, 5.27, 2.91, 4.45, 4.0, 3.82, 1.91, 2.55, 2.18],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Football Szn',
      data: [4.18, 3.27, 5.0, 5.18, 4.64, 3.0, 3.45, 2.73, 4.09, 3.73, 3.91, 3.73, 3.45, 1.82, 6.27, 7.36, 5.45, 5.27, 3.18, 3.64],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(2) } } },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { min: 0, max: 12, ticks: { color: '#94a3b8' }, grid: { color: '#334155' }, title: { display: true, text: 'Expected Category Wins', color: '#64748b' } }
    }
  }
});

// ---- Cumulative xWins Chart ----
new Chart(document.getElementById('cumChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Wk 1", "Wk 2", "Wk 3", "Wk 4", "Wk 5", "Wk 6", "Wk 7", "Wk 8", "Wk 9", "Wk 10", "Wk 11", "Wk 12", "Wk 13", "Wk 14", "Wk 15", "Wk 16", "Wk 17", "Wk 18", "Wk 19", "Wk 20"], datasets: [{
      label: 'The Rosterbation Station',
      data: [7.5, 16.1, 22.6, 29.7, 36.0, 43.1, 50.2, 56.5, 62.6, 68.3, 76.7, 86.0, 94.0, 102.5, 109.3, 114.2, 119.9, 127.4, 134.0, 139.0],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Moniebol üê≥',
      data: [6.5, 12.5, 16.6, 24.3, 32.2, 39.5, 47.7, 55.7, 63.9, 69.8, 75.2, 83.1, 89.3, 95.4, 99.4, 105.1, 111.3, 118.4, 126.6, 133.7],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [4.3, 9.8, 14.3, 21.1, 29.0, 34.1, 39.5, 47.7, 53.1, 61.1, 65.5, 68.5, 75.5, 80.2, 86.5, 91.4, 97.5, 105.8, 114.8, 119.5],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hatfield Hurlers',
      data: [6.1, 12.4, 17.9, 21.9, 30.8, 36.0, 41.0, 48.5, 53.2, 62.0, 67.5, 71.0, 77.7, 84.3, 90.5, 96.5, 102.3, 106.1, 111.1, 118.2],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Grand Salami Time',
      data: [7.3, 12.1, 17.9, 25.2, 28.7, 35.0, 39.9, 45.0, 50.7, 57.0, 63.5, 70.3, 75.8, 82.2, 89.6, 97.0, 102.4, 108.8, 114.6, 122.3],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '@DoodlesAnalytics',
      data: [4.8, 11.4, 17.8, 25.4, 31.8, 38.8, 45.5, 48.9, 54.5, 59.7, 66.4, 74.1, 80.4, 85.9, 93.0, 98.5, 106.8, 112.3, 118.5, 126.3],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'OG9Ô∏è‚É£',
      data: [6.0, 10.2, 16.3, 18.7, 23.5, 29.7, 34.2, 39.2, 45.0, 51.1, 52.8, 59.0, 65.5, 71.9, 78.6, 86.0, 92.4, 99.5, 106.8, 114.3],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Tegridy',
      data: [3.7, 8.3, 16.8, 23.4, 29.3, 34.7, 40.5, 44.9, 53.2, 59.2, 64.0, 69.5, 75.0, 80.7, 87.4, 90.4, 96.3, 100.0, 105.3, 113.3],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Serafini Hit Squad',
      data: [8.0, 15.8, 23.1, 28.4, 31.8, 37.2, 43.7, 48.0, 52.3, 55.6, 61.8, 66.1, 70.1, 77.0, 82.5, 91.6, 97.3, 103.3, 106.6, 110.4],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Getting Plowed Again.',
      data: [4.2, 11.1, 14.3, 19.2, 24.7, 30.0, 34.9, 42.4, 48.4, 53.8, 60.6, 65.1, 68.4, 73.7, 75.5, 78.6, 81.6, 87.1, 92.0, 96.7],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [7.0, 10.4, 16.0, 19.2, 22.5, 26.2, 32.1, 36.7, 41.5, 45.5, 52.5, 58.1, 63.4, 66.3, 70.7, 74.7, 78.5, 80.5, 83.0, 85.2],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Football Szn',
      data: [4.2, 7.5, 12.5, 17.6, 22.3, 25.3, 28.7, 31.5, 35.5, 39.3, 43.2, 46.9, 50.4, 52.2, 58.5, 65.8, 71.3, 76.5, 79.7, 83.4],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(1) } } },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { ticks: { color: '#94a3b8' }, grid: { color: '#334155' }, title: { display: true, text: 'Cumulative Expected Wins', color: '#64748b' } }
    }
  }
});

// ---- Batter vs Pitcher Scatter ----
const quadrantPlugin = {
  id: 'quadrant',
  beforeDraw(chart) {
    const {ctx, scales: {x, y}} = chart;
    const x50 = x.getPixelForValue(50);
    const y50 = y.getPixelForValue(50);
    ctx.save();
    ctx.strokeStyle = '#47556966';
    ctx.lineWidth = 1;
    ctx.setLineDash([5, 5]);
    ctx.beginPath(); ctx.moveTo(x50, y.top); ctx.lineTo(x50, y.bottom); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(x.left, y50); ctx.lineTo(x.right, y50); ctx.stroke();
    ctx.fillStyle = '#47556955';
    ctx.font = '11px Segoe UI';
    ctx.textAlign = 'center';
    const lx = x.getPixelForValue((x.min + 50) / 2);
    const rx = x.getPixelForValue((x.max + 50) / 2);
    const ty = y.getPixelForValue((y.max + 50) / 2);
    const by = y.getPixelForValue((y.min + 50) / 2);
    ctx.fillText('Pitching Carry', lx, ty);
    ctx.fillText('Elite', rx, ty);
    ctx.fillText('Struggling', lx, by);
    ctx.fillText('Batting Carry', rx, by);
    ctx.restore();
  }
};
const labelPlugin = {
  id: 'scatterLabels',
  afterDatasetDraw(chart) {
    const {ctx} = chart;
    chart.data.datasets.forEach((ds, i) => {
      chart.getDatasetMeta(i).data.forEach(pt => {
        ctx.save();
        ctx.font = '10px Segoe UI';
        ctx.fillStyle = '#94a3b8';
        ctx.textAlign = 'center';
        ctx.fillText(ds.label, pt.x, pt.y - 14);
        ctx.restore();
      });
    });
  }
};
new Chart(document.getElementById('scatterChart').getContext('2d'), {
  type: 'scatter',
  data: { datasets: [{
      label: 'The Rosterbation Station',
      data: [{x: 59.5, y: 55.7}],
      backgroundColor: '#ef4444', borderColor: '#ef4444',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Moniebol üê≥',
      data: [{x: 57.1, y: 53.8}],
      backgroundColor: '#f97316', borderColor: '#f97316',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø',
      data: [{x: 51.5, y: 47.5}],
      backgroundColor: '#eab308', borderColor: '#eab308',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Hatfield Hurlers',
      data: [{x: 53.4, y: 43.4}],
      backgroundColor: '#22c55e', borderColor: '#22c55e',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Grand Salami Time',
      data: [{x: 49.6, y: 52.8}],
      backgroundColor: '#14b8a6', borderColor: '#14b8a6',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: '@DoodlesAnalytics',
      data: [{x: 47.6, y: 59.6}],
      backgroundColor: '#3b82f6', borderColor: '#3b82f6',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'OG9Ô∏è‚É£',
      data: [{x: 53.2, y: 39.7}],
      backgroundColor: '#8b5cf6', borderColor: '#8b5cf6',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Tegridy',
      data: [{x: 47.9, y: 46.2}],
      backgroundColor: '#ec4899', borderColor: '#ec4899',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Serafini Hit Squad',
      data: [{x: 43.1, y: 50.0}],
      backgroundColor: '#06b6d4', borderColor: '#06b6d4',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Getting Plowed Again.',
      data: [{x: 39.9, y: 40.9}],
      backgroundColor: '#f59e0b', borderColor: '#f59e0b',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Ian Cumsler',
      data: [{x: 38.4, y: 31.5}],
      backgroundColor: '#10b981', borderColor: '#10b981',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Football Szn',
      data: [{x: 30.2, y: 41.1}],
      backgroundColor: '#a855f7', borderColor: '#a855f7',
      pointRadius: 8, pointHoverRadius: 11
    }] },
  plugins: [quadrantPlugin, labelPlugin],
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 28, right: 40, bottom: 8, left: 8 } },
    plugins: {
      legend: { display: false },
      tooltip: {
        ...tooltipOpts,
        callbacks: {
          label: ctx => ctx.dataset.label + ' - Bat: ' + ctx.parsed.x.toFixed(1) + '%, Pitch: ' + ctx.parsed.y.toFixed(1) + '%'
        }
      }
    },
    scales: {
      x: { title: { display: true, text: 'Batting Win %', color: '#64748b' }, ticks: { color: '#94a3b8', callback: v => v + '%' }, grid: { color: '#334155' } },
      y: { title: { display: true, text: 'Pitching Win %', color: '#64748b' }, ticks: { color: '#94a3b8', callback: v => v + '%' }, grid: { color: '#334155' } }
    }
  }
});

// ---- Toggle Power Score / Rank ----
function showChart(type) {
  document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
  if (type === 'score') {
    document.getElementById('scoreBox').style.display = 'block';
    document.getElementById('rankBox').style.display = 'none';
    document.querySelectorAll('.toggle-btn')[0].classList.add('active');
  } else {
    document.getElementById('scoreBox').style.display = 'none';
    document.getElementById('rankBox').style.display = 'block';
    document.querySelectorAll('.toggle-btn')[1].classList.add('active');
  }
}

// ---- Sortable tables ----
document.querySelectorAll('th.sortable').forEach(th => {
  th.addEventListener('click', () => {
    const tbl = th.closest('table');
    const idx = Array.from(th.parentElement.children).indexOf(th);
    const rows = Array.from(tbl.querySelectorAll('tr')).slice(1);
    const type = th.dataset.type || 'str';
    const isAsc = th.classList.contains('asc');
    th.parentElement.querySelectorAll('th').forEach(h => h.classList.remove('asc', 'desc'));
    th.classList.add(isAsc ? 'desc' : 'asc');
    const getVal = (row, i) => {
      const text = row.children[i].textContent.trim();
      if (type === 'num') return parseFloat(text.replace(/[+#]/g, '')) || 0;
      return text.toLowerCase();
    };
    rows.sort((a, b) => {
      const va = getVal(a, idx), vb = getVal(b, idx);
      const cmp = typeof va === 'string' ? va.localeCompare(vb) : va - vb;
      return isAsc ? -cmp : cmp;
    });
    const tbody = tbl.querySelector('tbody') || tbl;
    rows.forEach(r => tbody.appendChild(r));
  });
});
</script>
</body>
</html>