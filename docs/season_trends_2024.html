<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Summertime Sadness - 2024 Season Trends</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0f172a; color: #e2e8f0; font-family: 'Segoe UI', system-ui, sans-serif; padding: 24px; }
  .container { max-width: 1400px; margin: 0 auto; }
  h1 { text-align: center; font-size: 2em; margin-bottom: 4px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  h2 { text-align: center; color: #64748b; font-size: 1.1em; margin-bottom: 24px; }
  h3 { color: #38bdf8; margin: 32px 0 12px; font-size: 1.3em; border-bottom: 1px solid #1e293b; padding-bottom: 8px; }
  .section-desc { color: #94a3b8; font-size: 0.9em; margin-bottom: 16px; }
  .chart-box { background: #1e293b; border-radius: 12px; padding: 24px; margin-bottom: 24px; position: relative; height: 550px; }
  .toggle-container { text-align: center; margin-bottom: 16px; }
  .toggle-btn { background: #334155; color: #94a3b8; border: 1px solid #475569; padding: 8px 20px; cursor: pointer; font-size: 0.95em; transition: all 0.2s; }
  .toggle-btn:first-child { border-radius: 8px 0 0 8px; }
  .toggle-btn:last-child { border-radius: 0 8px 8px 0; }
  .toggle-btn.active { background: #3b82f6; color: white; border-color: #3b82f6; }
  .toggle-btn:hover { background: #475569; color: #e2e8f0; }
  .toggle-btn.active:hover { background: #2563eb; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 24px; }
  th { text-align: left; padding: 10px 12px; border-bottom: 2px solid #334155; color: #94a3b8; font-size: 0.85em; text-transform: uppercase; }
  td { padding: 8px 12px; border-bottom: 1px solid #1e293b; font-size: 0.95em; }
  tr:hover td { background: #1e293b; }
  .rank { color: #64748b; font-weight: 600; width: 40px; }
  .score { font-weight: 700; color: #34d399; }
  .year { color: #a78bfa; font-weight: 600; }
  .hot-val { color: #22c55e; font-weight: 700; }
  .cold-val { color: #ef4444; font-weight: 700; }
  .hot-tag { background: #22c55e22; color: #22c55e; padding: 2px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 700; }
  .cold-tag { background: #ef444422; color: #ef4444; padding: 2px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 700; }
  .steady-tag { background: #64748b22; color: #64748b; padding: 2px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 700; }
  th.sortable { cursor: pointer; user-select: none; position: relative; padding-right: 18px; }
  th.sortable:hover { color: #e2e8f0; }
  th.sortable::after { content: '\2195'; position: absolute; right: 4px; opacity: 0.3; font-size: 0.8em; }
  th.sortable.asc::after { content: '\2191'; opacity: 0.8; }
  th.sortable.desc::after { content: '\2193'; opacity: 0.8; }
  .best-table td:first-child { font-size: 1.2em; width: 36px; text-align: center; }
  .archive-badge { display: inline-block; background: #334155; color: #94a3b8; padding: 4px 16px; border-radius: 20px; font-size: 0.85em; margin-bottom: 8px; }
</style>
</head>
<body>
<div id="nav"></div>
<script src="nav.js"></script>
<div class="container">
<h1>Summertime Sadness Fantasy Baseball</h1>
<div style="text-align:center"><span class="archive-badge">Season Archive</span></div>
<h2>2024 Season Trends</h2>

<div class="toggle-container">
  <button class="toggle-btn active" onclick="showChart('score')">Power Score</button>
  <button class="toggle-btn" onclick="showChart('rank')">Power Rank</button>
</div>

<div class="chart-box" id="scoreBox">
<canvas id="scoreChart"></canvas>
</div>

<div class="chart-box" id="rankBox" style="display:none">
<canvas id="rankChart"></canvas>
</div>


<h3>Expected Category Wins by Week</h3>
<p class="section-desc">Each team's expected category wins per week based on all-play H2H simulation. Higher = dominated the field that week.</p>
<div class="chart-box">
<canvas id="xwinsChart"></canvas>
</div>

<h3>Cumulative Expected Wins</h3>
<p class="section-desc">Running total of expected category wins. Steeper slopes = hot streaks.</p>
<div class="chart-box">
<canvas id="cumChart"></canvas>
</div>

<h3>Batter vs Pitcher Performance</h3>
<p class="section-desc">Batting win rate (x) vs pitching win rate (y) from all-play H2H. Top-right = elite at both.</p>
<div class="chart-box">
<canvas id="scatterChart"></canvas>
</div>

<h3>Who's Hot / Who's Not</h3>
<p class="section-desc">Last 2 weeks (Weeks 20-21) vs season average.</p>
<table class="sortable-table">
<tr><th class="sortable" data-type="num">#</th><th class="sortable" data-type="str">Team</th><th class="sortable" data-type="num">Last 2 Wk Avg</th><th class="sortable" data-type="num">Season Avg</th><th class="sortable" data-type="num">Diff</th><th class="sortable" data-type="str">Trend</th></tr>
<tr><td class="rank">1</td><td><span style="color:#3b82f6">&#9679;</span> #RyderSources</td><td class="score">6.34</td><td>5.63</td><td class="hot-val">+0.71</td><td><span class="hot-tag">HOT</span></td></tr><tr><td class="rank">2</td><td><span style="color:#ec4899">&#9679;</span> Hmmm</td><td class="score">5.43</td><td>5.47</td><td class="cold-val">-0.03</td><td><span class="steady-tag">STEADY</span></td></tr><tr><td class="rank">3</td><td><span style="color:#eab308">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬Ø ‚ò†Ô∏è</td><td class="score">5.42</td><td>6.13</td><td class="cold-val">-0.71</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">4</td><td><span style="color:#06b6d4">&#9679;</span> Ian Cumsler</td><td class="score">4.92</td><td>4.78</td><td class="hot-val">+0.14</td><td><span class="steady-tag">STEADY</span></td></tr><tr><td class="rank">5</td><td><span style="color:#ef4444">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬ØüèÜ</td><td class="score">4.77</td><td>7.90</td><td class="cold-val">-3.12</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">6</td><td><span style="color:#f97316">&#9679;</span> Hatfield Hurlers</td><td class="score">4.74</td><td>5.71</td><td class="cold-val">-0.97</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">7</td><td><span style="color:#22c55e">&#9679;</span> Grand Salami Time</td><td class="score">3.32</td><td>6.23</td><td class="cold-val">-2.91</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">8</td><td><span style="color:#8b5cf6">&#9679;</span> Ready to Plow</td><td class="score">2.73</td><td>4.68</td><td class="cold-val">-1.95</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">9</td><td><span style="color:#f59e0b">&#9679;</span> BTHO notre dame</td><td class="score">2.55</td><td>5.17</td><td class="cold-val">-2.62</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">10</td><td><span style="color:#10b981">&#9679;</span> Moniebol (100gb goal)üê≥</td><td class="score">2.50</td><td>3.89</td><td class="cold-val">-1.39</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">11</td><td><span style="color:#14b8a6">&#9679;</span> The Rosterbation Station</td><td class="score">2.45</td><td>5.82</td><td class="cold-val">-3.36</td><td><span class="cold-tag">COLD</span></td></tr><tr><td class="rank">12</td><td><span style="color:#a855f7">&#9679;</span> OGglass-z13</td><td class="score">1.36</td><td>4.03</td><td class="cold-val">-2.67</td><td><span class="cold-tag">COLD</span></td></tr>
</table>

<h3>Season's Best Weekly Performances</h3>
<p class="section-desc">Best (or lowest for ERA/WHIP) team stat in any week.</p>
<table class="best-table">
<tr><th></th><th>Category</th><th>Value</th><th>Team</th><th>Week</th></tr>
<tr><td>&#x26BE;</td><td class="year">Runs</td><td class="score">63</td><td><span style="color:#8b5cf6">&#9679;</span> Ready to Plow</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">Hits</td><td class="score">98</td><td><span style="color:#ef4444">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬ØüèÜ</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">Home Runs</td><td class="score">20</td><td><span style="color:#8b5cf6">&#9679;</span> Ready to Plow</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">RBI</td><td class="score">62</td><td><span style="color:#ef4444">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬ØüèÜ</td><td class="year">Week 1</td></tr><tr><td>&#x26BE;</td><td class="year">Stolen Bases</td><td class="score">17</td><td><span style="color:#22c55e">&#9679;</span> Grand Salami Time</td><td class="year">Week 4</td></tr><tr><td>&#x26BE;</td><td class="year">OPS</td><td class="score">1.083</td><td><span style="color:#ec4899">&#9679;</span> Hmmm</td><td class="year">Week 18</td></tr><tr><td>&#x1F3AF;</td><td class="year">HR Allowed (Lowest)</td><td class="score">26</td><td><span style="color:#a855f7">&#9679;</span> OGglass-z13</td><td class="year">Week 14</td></tr><tr><td>&#x1F3AF;</td><td class="year">K/9</td><td class="score">13.8</td><td><span style="color:#eab308">&#9679;</span> ¬Ø\_(„ÉÑ)_/¬Ø ‚ò†Ô∏è</td><td class="year">Week 20</td></tr><tr><td>&#x1F3AF;</td><td class="year">Quality Starts</td><td class="score">9</td><td><span style="color:#f97316">&#9679;</span> Hatfield Hurlers</td><td class="year">Week 1</td></tr><tr><td>&#x1F3AF;</td><td class="year">Saves+Holds</td><td class="score">15</td><td><span style="color:#06b6d4">&#9679;</span> Ian Cumsler</td><td class="year">Week 1</td></tr><tr><td>&#x1F3AF;</td><td class="year">ERA (Lowest)</td><td class="score">0.900</td><td><span style="color:#06b6d4">&#9679;</span> Ian Cumsler</td><td class="year">Week 3</td></tr><tr><td>&#x1F3AF;</td><td class="year">WHIP (Lowest)</td><td class="score">0.660</td><td><span style="color:#22c55e">&#9679;</span> Grand Salami Time</td><td class="year">Week 5</td></tr>
</table>

</div>
<script>
const legendOpts = {
  position: 'bottom',
  labels: { color: '#e2e8f0', padding: 16, font: { size: 12 }, usePointStyle: true, pointStyle: 'circle' }
};
const tooltipOpts = {
  backgroundColor: '#1e293b', titleColor: '#e2e8f0', bodyColor: '#94a3b8',
  borderColor: '#475569', borderWidth: 1, padding: 12
};

// ---- Power Score ----
new Chart(document.getElementById('scoreChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Week 1", "Week 3", "Week 4", "Week 5", "Week 6", "Week 7", "Week 8", "Week 9", "Week 10", "Week 11", "Week 12", "Week 13", "Week 14", "Week 15", "Week 16", "Week 17", "Week 18", "Week 19", "Week 20"], datasets: [{
      label: '¬Ø\\_(„ÉÑ)_/¬ØüèÜ',
      data: [null, 856.8, 849.6, 943.9, 1003.7, 1078.5, 1092.0, 1080.5, 1085.8, 1097.5, 1090.6, 1104.5, 1110.2, 1122.5, 1123.7, 1138.4, 1145.6, 1167.5, 1168.1],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hatfield Hurlers',
      data: [584.7, 545.1, 536.8, 530.3, 581.5, 638.8, 651.4, 673.1, 694.7, 626.6, 657.4, 681.5, 646.8, 662.7, 665.4, 700.2, 711.0, 677.6, 687.9],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø ‚ò†Ô∏è',
      data: [825.4, 798.0, 668.6, 572.1, 657.4, 687.4, 777.6, 773.6, 808.8, 714.6, 692.0, 705.7, 683.6, 662.1, 630.3, 690.0, 715.0, 689.3, 683.5],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Grand Salami Time',
      data: [714.2, null, 681.8, 658.4, 720.7, 740.1, 738.8, 724.2, 755.7, 742.7, 663.5, 691.3, 696.5, 698.1, 695.4, 712.4, 702.6, 678.6, 678.5],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Rosterbation Station',
      data: [null, 698.9, 653.5, 618.8, 685.8, 613.7, 615.4, 631.7, 709.9, 645.6, 601.7, 581.8, 539.8, 517.1, 538.8, 587.1, 635.4, 628.5, 622.5],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '#RyderSources',
      data: [null, null, 372.2, 396.9, 452.2, 471.3, 451.2, 402.8, 463.5, 409.8, 399.6, 432.3, 404.8, 409.7, 441.7, 480.5, 502.2, 503.4, 510.6],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ready to Plow',
      data: [786.5, 723.2, 679.0, 608.4, 622.1, 504.6, 493.6, 514.7, 552.4, 580.3, 525.3, 531.4, 513.6, 519.0, 491.6, 520.3, 543.5, 500.0, 494.4],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hmmm',
      data: [null, null, 406.6, 375.8, 436.0, 462.3, 438.6, 466.0, 490.4, 490.7, 496.4, 432.7, 441.7, 460.5, 439.5, 471.0, 552.2, 498.5, 482.5],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [687.5, 657.4, 526.1, 489.8, 521.4, 592.3, 572.8, 488.4, 491.3, 428.0, 435.2, 454.2, 461.1, 424.9, 425.3, 429.3, 464.1, 449.9, 454.8],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'BTHO notre dame',
      data: [null, null, 457.0, 373.5, 370.8, 404.7, 411.6, 461.3, 473.1, 459.3, 469.9, 474.3, 472.6, 480.8, 484.0, 474.7, 508.0, 454.8, 442.8],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Moniebol (100gb goal)üê≥',
      data: [340.2, null, 207.2, 251.0, 289.7, 279.9, 267.9, 265.0, 224.3, 273.2, 271.2, 219.6, 246.2, 236.1, 222.1, 250.2, 243.1, 232.7, 264.2],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'OGglass-z13',
      data: [null, null, 452.2, 383.7, 507.7, 515.5, 416.4, 413.4, 423.3, 366.4, 387.3, 359.2, 290.4, 232.0, 225.1, 206.3, 153.3, 153.3, 150.5],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(1) } } },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { ticks: { color: '#94a3b8' }, grid: { color: '#334155' }, title: { display: true, text: 'Power Score', color: '#64748b' } }
    }
  }
});

// ---- Power Rank ----
new Chart(document.getElementById('rankChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Week 1", "Week 3", "Week 4", "Week 5", "Week 6", "Week 7", "Week 8", "Week 9", "Week 10", "Week 11", "Week 12", "Week 13", "Week 14", "Week 15", "Week 16", "Week 17", "Week 18", "Week 19", "Week 20"], datasets: [{
      label: '¬Ø\\_(„ÉÑ)_/¬ØüèÜ',
      data: [null, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hatfield Hurlers',
      data: [9.0, 8.5, 7.0, 7.0, 6.0, 5.0, 4.0, 3.0, 5.0, 5.0, 3.0, 3.0, 4.0, 3.5, 4.0, 3.0, 3.0, 3.0, 3.0],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø ‚ò†Ô∏è',
      data: [1.5, 2.0, 5.0, 5.0, 5.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.5, 2.0, 2.0, 2.0, 2.0],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Grand Salami Time',
      data: [6.0, null, 4.0, 2.0, 2.0, 2.0, 3.0, 4.0, 4.0, 3.0, 4.0, 4.0, 3.0, 3.5, 2.5, 4.0, 4.0, 4.0, 4.0],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Rosterbation Station',
      data: [null, 6.0, 3.0, 3.0, 3.0, 4.0, 5.0, 5.0, 3.0, 4.0, 5.0, 5.0, 5.0, 6.0, 5.0, 5.0, 5.0, 5.0, 5.0],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '#RyderSources',
      data: [null, null, 9.5, 8.5, 8.0, 8.0, 7.0, 6.0, 7.0, 8.0, 9.0, 7.0, 10.0, 10.0, 8.0, 7.0, 7.0, 6.5, 6.0],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ready to Plow',
      data: [3.0, 4.0, 2.0, 4.0, 4.0, 9.0, 8.0, 7.5, 6.0, 6.0, 6.0, 6.0, 6.0, 5.0, 6.0, 6.0, 6.0, 6.5, 7.0],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hmmm',
      data: [null, null, 11.0, 10.5, 10.0, 10.0, 11.0, 10.0, 11.0, 7.0, 7.0, 8.0, 7.0, 7.0, 10.0, 10.0, 8.0, 8.5, 9.5],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [7.0, 5.0, 6.0, 6.0, 7.0, 6.0, 6.0, 7.5, 8.0, 11.0, 10.0, 9.0, 8.0, 9.0, 9.0, 8.0, 10.0, 8.5, 8.0],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'BTHO notre dame',
      data: [null, null, 8.0, 8.5, 11.0, 11.0, 10.0, 9.0, 9.0, 9.0, 11.0, 10.0, 9.0, 8.0, 7.0, 9.0, 9.0, 10.0, 9.5],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Moniebol (100gb goal)üê≥',
      data: [11.0, null, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 11.0, 11.0, 11.0],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'OGglass-z13',
      data: [null, null, 9.5, 10.5, 9.0, 7.0, 9.0, 11.0, 10.0, 10.0, 8.0, 11.0, 11.0, 11.0, 11.0, 11.0, 12.0, 12.0, 12.0],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: tooltipOpts },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { reverse: true, min: 1, max: 12, ticks: { color: '#94a3b8', stepSize: 1 }, grid: { color: '#334155' }, title: { display: true, text: 'Power Rank', color: '#64748b' } }
    }
  }
});

// ---- xWins by Week ----
new Chart(document.getElementById('xwinsChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Wk 1", "Wk 2", "Wk 3", "Wk 4", "Wk 5", "Wk 6", "Wk 7", "Wk 8", "Wk 9", "Wk 10", "Wk 11", "Wk 12", "Wk 13", "Wk 14", "Wk 15", "Wk 16", "Wk 17", "Wk 18", "Wk 19", "Wk 20", "Wk 21"], datasets: [{
      label: '¬Ø\\_(„ÉÑ)_/¬ØüèÜ',
      data: [8.64, 7.73, 6.73, 8.18, 9.91, 6.36, 8.91, 8.36, 7.55, 5.55, 9.82, 7.82, 6.55, 10.82, 9.18, 9.82, 6.36, 7.73, 10.27, 9.55, 0],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hatfield Hurlers',
      data: [5.73, 5.73, 4.0, 5.91, 7.45, 6.73, 6.45, 6.36, 6.36, 6.0, 3.45, 6.64, 5.36, 4.73, 6.18, 6.36, 5.18, 5.36, 6.36, 5.73, 3.75],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø ‚ò†Ô∏è',
      data: [7.09, 6.73, 6.91, 4.0, 3.82, 6.09, 7.64, 9.0, 8.45, 5.55, 5.27, 5.45, 5.64, 7.0, 5.45, 4.09, 8.73, 5.55, 5.45, 7.09, 3.75],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Grand Salami Time',
      data: [6.91, 6.09, 9.27, 7.0, 5.82, 6.45, 5.64, 6.18, 5.91, 8.0, 7.73, 5.36, 7.64, 7.27, 6.91, 6.09, 4.82, 4.0, 7.09, 6.64, 0],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Rosterbation Station',
      data: [6.0, 6.27, 5.91, 7.18, 6.09, 7.45, 5.09, 5.91, 7.18, 7.36, 5.73, 4.73, 4.73, 3.73, 5.18, 6.91, 7.82, 7.27, 6.73, 4.91, 0],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '#RyderSources',
      data: [3.36, 6.91, 5.36, 4.18, 5.36, 5.55, 4.91, 5.18, 3.45, 8.64, 3.45, 4.64, 8.27, 4.45, 5.73, 6.91, 5.91, 6.82, 6.55, 7.18, 5.5],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ready to Plow',
      data: [7.09, 4.45, 5.91, 5.91, 4.0, 3.82, 1.45, 2.91, 4.82, 6.36, 7.91, 2.82, 5.73, 4.55, 6.09, 4.0, 6.73, 5.0, 3.27, 5.45, 0],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hmmm',
      data: [7.18, 5.73, 3.73, 4.27, 5.36, 6.0, 6.09, 3.73, 6.73, 3.09, 6.27, 5.82, 3.27, 6.64, 6.91, 4.0, 5.64, 9.45, 4.0, 3.36, 7.5],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [5.82, 3.64, 8.27, 5.36, 3.64, 3.64, 6.27, 5.45, 2.55, 3.0, 2.27, 6.27, 6.55, 5.09, 4.64, 3.82, 4.0, 5.55, 4.64, 5.09, 4.75],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'BTHO notre dame',
      data: [2.64, 5.0, 4.09, 7.91, 5.55, 4.55, 6.82, 6.27, 5.73, 3.73, 5.45, 5.91, 5.73, 5.0, 6.73, 7.73, 5.0, 5.91, 3.73, 5.09, 0],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Moniebol (100gb goal)üê≥',
      data: [2.45, 2.45, 2.73, 3.91, 6.0, 3.09, 3.45, 4.18, 3.55, 4.09, 6.18, 5.91, 4.73, 3.73, 3.82, 3.82, 4.45, 3.0, 5.18, 5.0, 0],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'OGglass-z13',
      data: [5.64, 6.0, 4.36, 3.55, 3.64, 6.45, 4.73, 3.45, 4.82, 4.91, 4.45, 5.36, 3.55, 4.09, 2.55, 4.0, 3.27, 1.55, 5.55, 2.73, 0],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(2) } } },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { min: 0, max: 12, ticks: { color: '#94a3b8' }, grid: { color: '#334155' }, title: { display: true, text: 'Expected Category Wins', color: '#64748b' } }
    }
  }
});

// ---- Cumulative xWins ----
new Chart(document.getElementById('cumChart').getContext('2d'), {
  type: 'line',
  data: { labels: ["Wk 1", "Wk 2", "Wk 3", "Wk 4", "Wk 5", "Wk 6", "Wk 7", "Wk 8", "Wk 9", "Wk 10", "Wk 11", "Wk 12", "Wk 13", "Wk 14", "Wk 15", "Wk 16", "Wk 17", "Wk 18", "Wk 19", "Wk 20", "Wk 21"], datasets: [{
      label: '¬Ø\\_(„ÉÑ)_/¬ØüèÜ',
      data: [8.6, 16.4, 23.1, 31.3, 41.2, 47.5, 56.5, 64.8, 72.4, 77.9, 87.7, 95.5, 102.1, 112.9, 122.1, 131.9, 138.3, 146.0, 156.3, 165.8, 165.8],
      borderColor: '#ef4444', backgroundColor: '#ef444422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hatfield Hurlers',
      data: [5.7, 11.5, 15.5, 21.4, 28.8, 35.5, 42.0, 48.4, 54.7, 60.7, 64.2, 70.8, 76.2, 80.9, 87.1, 93.5, 98.6, 104.0, 110.4, 116.1, 119.8],
      borderColor: '#f97316', backgroundColor: '#f9731622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø ‚ò†Ô∏è',
      data: [7.1, 13.8, 20.7, 24.7, 28.5, 34.6, 42.3, 51.3, 59.7, 65.3, 70.5, 76.0, 81.6, 88.6, 94.1, 98.2, 106.9, 112.5, 117.9, 125.0, 128.8],
      borderColor: '#eab308', backgroundColor: '#eab30822',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Grand Salami Time',
      data: [6.9, 13.0, 22.3, 29.3, 35.1, 41.5, 47.2, 53.4, 59.3, 67.3, 75.0, 80.4, 88.0, 95.3, 102.2, 108.3, 113.1, 117.1, 124.2, 130.8, 130.8],
      borderColor: '#22c55e', backgroundColor: '#22c55e22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'The Rosterbation Station',
      data: [6.0, 12.3, 18.2, 25.4, 31.5, 38.9, 44.0, 49.9, 57.1, 64.5, 70.2, 74.9, 79.6, 83.4, 88.5, 95.5, 103.3, 110.5, 117.3, 122.2, 122.2],
      borderColor: '#14b8a6', backgroundColor: '#14b8a622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: '#RyderSources',
      data: [3.4, 10.3, 15.6, 19.8, 25.2, 30.7, 35.6, 40.8, 44.3, 52.9, 56.4, 61.0, 69.3, 73.7, 79.5, 86.4, 92.3, 99.1, 105.6, 112.8, 118.3],
      borderColor: '#3b82f6', backgroundColor: '#3b82f622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ready to Plow',
      data: [7.1, 11.5, 17.5, 23.4, 27.4, 31.2, 32.6, 35.5, 40.4, 46.7, 54.6, 57.5, 63.2, 67.7, 73.8, 77.8, 84.5, 89.5, 92.8, 98.3, 98.3],
      borderColor: '#8b5cf6', backgroundColor: '#8b5cf622',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Hmmm',
      data: [7.2, 12.9, 16.6, 20.9, 26.3, 32.3, 38.4, 42.1, 48.8, 51.9, 58.2, 64.0, 67.3, 73.9, 80.8, 84.8, 90.5, 99.9, 103.9, 107.3, 114.8],
      borderColor: '#ec4899', backgroundColor: '#ec489922',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Ian Cumsler',
      data: [5.8, 9.5, 17.7, 23.1, 26.7, 30.4, 36.6, 42.1, 44.6, 47.6, 49.9, 56.2, 62.7, 67.8, 72.5, 76.3, 80.3, 85.8, 90.5, 95.5, 100.3],
      borderColor: '#06b6d4', backgroundColor: '#06b6d422',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'BTHO notre dame',
      data: [2.6, 7.6, 11.7, 19.6, 25.2, 29.7, 36.5, 42.8, 48.5, 52.3, 57.7, 63.6, 69.4, 74.4, 81.1, 88.8, 93.8, 99.7, 103.5, 108.5, 108.5],
      borderColor: '#f59e0b', backgroundColor: '#f59e0b22',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'Moniebol (100gb goal)üê≥',
      data: [2.5, 4.9, 7.6, 11.5, 17.5, 20.6, 24.1, 28.3, 31.8, 35.9, 42.1, 48.0, 52.7, 56.5, 60.3, 64.1, 68.5, 71.5, 76.7, 81.7, 81.7],
      borderColor: '#10b981', backgroundColor: '#10b98122',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    },
      {
      label: 'OGglass-z13',
      data: [5.6, 11.6, 16.0, 19.5, 23.2, 29.6, 34.4, 37.8, 42.6, 47.5, 52.0, 57.4, 60.9, 65.0, 67.5, 71.5, 74.8, 76.4, 81.9, 84.6, 84.6],
      borderColor: '#a855f7', backgroundColor: '#a855f722',
      borderWidth: 2.5, pointRadius: 3, pointHoverRadius: 6, tension: 0.3, fill: false
    }] },
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 8, right: 16 } },
    interaction: { mode: 'index', intersect: false },
    plugins: { legend: legendOpts, tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(1) } } },
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { color: '#1e293b33' } },
      y: { ticks: { color: '#94a3b8' }, grid: { color: '#334155' }, title: { display: true, text: 'Cumulative Expected Wins', color: '#64748b' } }
    }
  }
});

// ---- Scatter ----
const quadrantPlugin = {
  id: 'quadrant',
  beforeDraw(chart) {
    const {ctx, scales: {x, y}} = chart;
    const x50 = x.getPixelForValue(50), y50 = y.getPixelForValue(50);
    ctx.save();
    ctx.strokeStyle = '#47556966'; ctx.lineWidth = 1; ctx.setLineDash([5, 5]);
    ctx.beginPath(); ctx.moveTo(x50, y.top); ctx.lineTo(x50, y.bottom); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(x.left, y50); ctx.lineTo(x.right, y50); ctx.stroke();
    ctx.fillStyle = '#47556955'; ctx.font = '11px Segoe UI'; ctx.textAlign = 'center';
    const lx = x.getPixelForValue((x.min+50)/2), rx = x.getPixelForValue((x.max+50)/2);
    const ty = y.getPixelForValue((y.max+50)/2), by = y.getPixelForValue((y.min+50)/2);
    ctx.fillText('Pitching Carry', lx, ty); ctx.fillText('Elite', rx, ty);
    ctx.fillText('Struggling', lx, by); ctx.fillText('Batting Carry', rx, by);
    ctx.restore();
  }
};
const labelPlugin = {
  id: 'scatterLabels',
  afterDatasetDraw(chart) {
    const {ctx} = chart;
    chart.data.datasets.forEach((ds, i) => {
      chart.getDatasetMeta(i).data.forEach(pt => {
        ctx.save(); ctx.font = '10px Segoe UI'; ctx.fillStyle = '#94a3b8'; ctx.textAlign = 'center';
        ctx.fillText(ds.label, pt.x, pt.y - 14); ctx.restore();
      });
    });
  }
};
new Chart(document.getElementById('scatterChart').getContext('2d'), {
  type: 'scatter',
  data: { datasets: [{
      label: '¬Ø\\_(„ÉÑ)_/¬ØüèÜ',
      data: [{x: 73.7, y: 64.5}],
      backgroundColor: '#ef4444', borderColor: '#ef4444',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Hatfield Hurlers',
      data: [{x: 54.3, y: 41.8}],
      backgroundColor: '#f97316', borderColor: '#f97316',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: '¬Ø\\_(„ÉÑ)_/¬Ø ‚ò†Ô∏è',
      data: [{x: 51.3, y: 52.1}],
      backgroundColor: '#eab308', borderColor: '#eab308',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Grand Salami Time',
      data: [{x: 55.8, y: 53.3}],
      backgroundColor: '#22c55e', borderColor: '#22c55e',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'The Rosterbation Station',
      data: [{x: 49.8, y: 52.0}],
      backgroundColor: '#14b8a6', borderColor: '#14b8a6',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: '#RyderSources',
      data: [{x: 46.4, y: 47.6}],
      backgroundColor: '#3b82f6', borderColor: '#3b82f6',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Ready to Plow',
      data: [{x: 44.5, y: 37.3}],
      backgroundColor: '#8b5cf6', borderColor: '#8b5cf6',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Hmmm',
      data: [{x: 40.6, y: 49.4}],
      backgroundColor: '#ec4899', borderColor: '#ec4899',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Ian Cumsler',
      data: [{x: 33.9, y: 45.7}],
      backgroundColor: '#06b6d4', borderColor: '#06b6d4',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'BTHO notre dame',
      data: [{x: 47.8, y: 42.7}],
      backgroundColor: '#f59e0b', borderColor: '#f59e0b',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'Moniebol (100gb goal)üê≥',
      data: [{x: 29.5, y: 38.6}],
      backgroundColor: '#10b981', borderColor: '#10b981',
      pointRadius: 8, pointHoverRadius: 11
    },
      {
      label: 'OGglass-z13',
      data: [{x: 37.8, y: 32.7}],
      backgroundColor: '#a855f7', borderColor: '#a855f7',
      pointRadius: 8, pointHoverRadius: 11
    }] },
  plugins: [quadrantPlugin, labelPlugin],
  options: {
    responsive: true, maintainAspectRatio: false,
    layout: { padding: { top: 28, right: 40, bottom: 8, left: 8 } },
    plugins: {
      legend: { display: false },
      tooltip: { ...tooltipOpts, callbacks: { label: ctx => ctx.dataset.label + ' - Bat: ' + ctx.parsed.x.toFixed(1) + '%, Pitch: ' + ctx.parsed.y.toFixed(1) + '%' } }
    },
    scales: {
      x: { title: { display: true, text: 'Batting Win %', color: '#64748b' }, ticks: { color: '#94a3b8', callback: v => v + '%' }, grid: { color: '#334155' } },
      y: { title: { display: true, text: 'Pitching Win %', color: '#64748b' }, ticks: { color: '#94a3b8', callback: v => v + '%' }, grid: { color: '#334155' } }
    }
  }
});

// ---- Toggle ----
function showChart(type) {
  document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
  if (type === 'score') {
    document.getElementById('scoreBox').style.display = 'block';
    document.getElementById('rankBox').style.display = 'none';
    document.querySelectorAll('.toggle-btn')[0].classList.add('active');
  } else {
    document.getElementById('scoreBox').style.display = 'none';
    document.getElementById('rankBox').style.display = 'block';
    document.querySelectorAll('.toggle-btn')[1].classList.add('active');
  }
}

// ---- Sortable tables ----
document.querySelectorAll('th.sortable').forEach(th => {
  th.addEventListener('click', () => {
    const tbl = th.closest('table');
    const idx = Array.from(th.parentElement.children).indexOf(th);
    const rows = Array.from(tbl.querySelectorAll('tr')).slice(1);
    const type = th.dataset.type || 'str';
    const isAsc = th.classList.contains('asc');
    th.parentElement.querySelectorAll('th').forEach(h => h.classList.remove('asc', 'desc'));
    th.classList.add(isAsc ? 'desc' : 'asc');
    const getVal = (row, i) => {
      const text = row.children[i].textContent.trim();
      if (type === 'num') return parseFloat(text.replace(/[+#]/g, '')) || 0;
      return text.toLowerCase();
    };
    rows.sort((a, b) => {
      const va = getVal(a, idx), vb = getVal(b, idx);
      const cmp = typeof va === 'string' ? va.localeCompare(vb) : va - vb;
      return isAsc ? -cmp : cmp;
    });
    const tbody = tbl.querySelector('tbody') || tbl;
    rows.forEach(r => tbody.appendChild(r));
  });
});
</script>
</body>
</html>